<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ゴルフルール</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body { font-family: system-ui, sans-serif; margin: 0; background: #fff; }
      header { background: #16a34a; color: #fff; padding: 1rem; text-align: center; font-weight: bold; }
      button { cursor: pointer; border: none; width: 100%; }
      .card { border-radius: 0.5rem; padding: 1.2rem; text-align: center; font-size: 1.1rem; }
      .green { background: #ecfdf5; }
      .yellow { background: #fef9c3; }
      .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
      a { text-decoration: none; color: inherit; display: block; }
      ul.suggestions { list-style:none; padding:0; margin:0.5rem 0 0 0; border:1px solid #ccc; border-radius:0.5rem; background:#fff; }
      ul.suggestions li { padding:0.5rem; border-bottom:1px solid #eee; }
      ul.suggestions li:last-child { border-bottom:none; }
      ul.suggestions a { color:#16a34a; text-decoration:none; }
    </style>
  <style>
.filter-section {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 8px;
  margin-bottom: 16px;
}

.filter-section button {
  padding: 10px;
  font-size: 14px;
  border: none;
  border-radius: 6px;
  background: #f2f8f2;
  cursor: pointer;
}

.filter-section button:hover {
  background: #d8efd8;
}

@media (max-width: 600px) {
  .filter-section {
    grid-template-columns: repeat(2, 1fr);
  }
  .filter-section h3 {
    font-size: 14px;
  }
}
</style>
</head>
  <body>
    <header>ゴルフルール</header>
    <div id="root"></div>

    <script type="text/babel">
      function App() {
        const [query, setQuery] = React.useState("");
        const [suggestions, setSuggestions] = React.useState([]);
        const [rules, setRules] = React.useState([]);

        React.useEffect(() => {
          fetch("rules.json")
            .then(res => res.json())
            .then(data => setRules(data));
        }, []);

        const handleChange = (e) => {
          const value = e.target.value;
          setQuery(value);
          if (value.length > 0) {
            const filtered = rules.filter((rule) =>
              rule.name.toLowerCase().includes(value.toLowerCase())
            );
            setSuggestions(filtered);
          } else {
            setSuggestions([]);
          }
        };

        return (
          <main style={{ padding: "1rem" }}>
            <a href="rules.html">
              <button className="card yellow" style={{ marginBottom: "1rem", fontWeight: "bold" }}>
                📑 ルール一覧（2025 最新ver.）
              </button>
            </a>

            <div>
              <input
                type="text"
                value={query}
                onChange={handleChange}
                placeholder="ルールを検索..."
                style={{ width: "100%", border: "1px solid #ccc", borderRadius: "0.5rem", padding: "0.75rem" }}
              />
              {suggestions.length > 0 && (
                <ul className="suggestions">
                  {suggestions.map((s) => (
                    <li key={s.id}>
                      <a href={"rule-detail.html?id=" + s.id}>{s.name}</a>
                    </li>
                  ))}
                </ul>
              )}
            </div>

            <section style={{ marginTop: "1.5rem" }}>
              <h2 style={{ fontWeight: "bold", marginBottom: "0.5rem" }}>⭐ よく見るルール</h2>
              <a href="rule-detail.html?id=4">
                <div className="card green">バンカーでクラブを砂につけていい？</div>
              </a>
            </section>

            <section style={{ marginTop: "1.5rem" }}>
              <h2 style={{ fontWeight: "bold", marginBottom: "0.5rem" }}>🌱 場所で探す</h2>
              <div className="grid">
                <a href="rules.html"><button className="card green">ティー</button></a>
                <a href="rules.html"><button className="card green">フェアウェイ</button></a>
                <a href="rules.html"><button className="card green">ラフ</button></a>
                <a href="rules.html"><button className="card green">グリーン</button></a>
                <a href="rules.html"><button className="card green" style={{ gridColumn: "span 2" }}>バンカー</button></a>
              </div>
            </section>

            <section style={{ marginTop: "1.5rem" }}>
              <h2 style={{ fontWeight: "bold", marginBottom: "0.5rem" }}>📂 種類から探す</h2>
              <div className="grid">
                <a href="rules.html"><button className="card yellow">OB</button></a>
                <a href="rules.html"><button className="card yellow">ペナルティ</button></a>
                <a href="rules.html"><button className="card yellow">プレー順</button></a>
                <a href="rules.html"><button className="card yellow">道具の扱い</button></a>
              </div>
            </section>

            <section style={{ marginTop: "1.5rem" }}>
              <a href="favorites.html">⭐ お気に入りルールへ</a>
            </section>
          </main>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
<script>
// カテゴリフィルターボタン処理
document.querySelectorAll('.filter-section button').forEach(btn => {
  btn.addEventListener('click', () => {
    const category = btn.getAttribute('data-category');
    displayRules(rules.filter(rule => rule.category === category));
  });
});
</script>


<div class="filter-section">
  <h3>杭</h3>
  <button data-category="杭">📍 杭（全般）</button>
  <button data-category="赤杭">🔴 赤杭</button>
  <button data-category="黄杭">🟡 黄杭</button>
  <button data-category="青杭">🔵 青杭</button>
  <button data-category="緑杭">🟢 緑杭</button>
  <button data-category="白杭">⚪ 白杭</button>
  <button data-category="黒杭">⚫ 黒杭</button>
</div>

</body>
</html>
